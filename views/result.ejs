<!DOCTYPE html>
<html>
  <head>
    <script src="/codemirror/lib/codemirror.js"></script>
    <script src="/codemirror/mode/javascript.js"></script>
    <script src="/codemirror/addon/line_numbers.js"></script>
    <script src="/codemirror/addon/edit/closebrackets.js"></script>
    <script src="/codemirror/addon/edit/closetag.js"></script>
    <script src="/codemirror/addon/edit/continuelist.js"></script>
    <script src="/codemirror/addon/edit/matchbrackets.js"></script>
    <script src="/codemirror/addon/edit/matchtags.js"></script>
    <script src="/codemirror/addon/edit/trailingspace.js"></script>

    <link rel="stylesheet" href="/codemirror/lib/codemirror.css">
    <link rel="stylesheet" href="/codemirror/theme/material-palenight.css">
    <link rel="stylesheet" href="/stylesheets/problem.css">
    <% include ./partials/head %>
  </head>
  <body>
    <% include ./partials/header %>

    <h2 class="problem-title">
      <%= title %>:
      <% if (isAllPass) { %>
        <span> 모든 테스트 케이스 통과!</span>
      <% } else { %>
        <span> 모든 테스트 케이스를 통과하지 못했습니다..</span>
      <% } %>
    </h2>

    <div class="problem-container">
      <div class="test-cases">
        <% for (let i = 0; i < tests.length; i++) { %>
          <div class="test-case <%= passOrFail[i] %>">
            <span class="test-number"><%= `${i + 1}번 테스트 케이스` %></span>
            <div class="test-box">
              <span class="test-code">: <%= tests[i].code %> = </span>
              <span class="test-solution"><%= tests[i].solution %></span>
            </div>
            <div class="user-code-run">
              <span>실행 결과: <%= result[i] %> (<%= passOrFail[i] %>)</span>
            </div>
          </div>
        <% } %>
      </div>
      <form class="codemirror" action="/problems/<%= id %>/restart" method="POST">
        <div class="editor-container">
          <textarea id="editor" name="userAnswer">
<%= userAnswer %></textarea>
        </div>
        <button class="codemirror-button" type="submit">다시 풀기</button>
      </form>
    </div>

    <% include ./partials/footer %>
    <script src='/javascripts/editor.js'></script>
  </body>
</html>
